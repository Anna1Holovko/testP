<apex:page controller="SalesOrderSearchController" readOnly="true" sidebar="false" showHeader="false">
    <apex:includeScript value="https://code.jquery.com/jquery-1.11.3.min.js"/>
    <apex:includeScript value="{!$Resource.shCorejs}"/>
    <apex:includeScript value="{!$Resource.jquerydataTablesjs}"/>
    <apex:includeScript value="{!$Resource.demojs}"/>
    <apex:includeScript value="{!$Resource.dataTableresponsivemin}"/>
    <apex:includeScript value="{!$Resource.dataTableresponsive}"/>
    
    <apex:stylesheet value="{!URLFOR($Resource.democss)}"/>
    <apex:stylesheet value="{!URLFOR($Resource.shCorecss)}"/>
    <apex:stylesheet value="{!URLFOR($Resource.responsivedataTablescss)}"/>
    <apex:stylesheet value="{!URLFOR($Resource.jquerydataTablescss)}"/>
    <apex:stylesheet value="{!URLFOR($Resource.renegade_stylesheet)}"/>
    <apex:form id="formId">
        <html>
            <head>
                <title>Renegade Sales Order Search page</title>
                
                <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"/>
                <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/plug-ins/a5734b29083/integration/bootstrap/3/dataTables.bootstrap.css"/>
               <apex:outputPanel id="javaScriptPanel">
                    <apex:outputPanel id="innerjavaScriptPanel"> 
                <script type="text/javascript" class="init">
                
                /************ Search javascript code ************/
                /*************** Search Button Enter Functionality *********/
                function uniKeyCode(event) {
                    try {
                        if(event.keyCode == 13){
                            //alert('event.keyCode is ----'+event.keyCode);
                            event.preventDefault();
                            var status = document.getElementById('j_id0:formId:j_id86:Details').value;
                            searchPurchaseOrdersJS(status);
                            return false;
                        }
                    }
                    catch(Error) {
                        console.log('Exception ex : '+Error);
                        //alert('Error: '+Error);
                    }
                }
                /*************** Search Button Enter Functionality *********/ 
                
                function goToHomePage() {
                    window.location = '/home/home.jsp';
                }
                
                $(document).ready(function() {
                    
                    $('#example').DataTable( {
                        responsive: {
                            details:false
                        },
                        "paging":   false,
                        "ordering": true,
                        "info":     false
                    } );
                } );
                
                /*********** Search javascript code ************/
                function searchPurchaseOrdersJS(status) 
                {
                    var customerName = document.getElementById('customerName').value;
                    var name = document.getElementById('accName').value; 
                    var Email = document.getElementById('Email').value; 
                    
                    //alert('Status '+status);
                    //alert('customerName '+customerName);
                    //alert('name '+name);
                    //alert('Email '+Email);
                    if(status != null || customerName != null || name != null || Email != null )
                    {
                        SalesOrderSearchController.searchProducts(status,name,customerName,Email,
                                                              function(result, event)
                                                              {
                                                                  if (event.status) 
                                                                  {
                                                                      if(result=='[]')
                                                                      {
                                                                          alert('No results found.');
                                                                          document.getElementById('customerName').value='';
                                                                          document.getElementById('accName').value=''; 
                                                                          document.getElementById('Email').value='';
                                                                      }
                                                                      else 
                                                                          renderProducts(result);  
                                                                  } 
                                                                  else if (event.type == 'exception') 
                                                                  {
                                                                      alert(event.message);
                                                                      document.getElementById("errors-js").innerHTML = event.message;
                                                                  } else 
                                                                  {
                                                                      alert(event.message);
                                                                      document.getElementById("errors-js").innerHTML = event.message;
                                                                  }
                                                              }, {escape:true});
                    }
                }
                
                function getPrevProducts() 
                {
                    var firstPayapalIdval = document.getElementById('firstPayapalId').value; 
                    var query = document.getElementById('storedquery').value;
                    SalesOrderSearchController.getPrevProducts(firstPayapalIdval,query, 
                                                           function(result, event)
                                                           {
                                                               if (event.status) 
                                                               {
                                                                   if(result=='[]')
                                                                   {
                                                                       alert('No results found.');
                                                                   }
                                                                   else 
                                                                       renderProducts(result);
                                                               } 
                                                               else if (event.type == 'exception') 
                                                               {
                                                                   document.getElementById("errors-js").innerHTML = event.message;
                                                               } else 
                                                               {
                                                                   document.getElementById("errors-js").innerHTML = event.message;
                                                               }
                                                           }, {escape:true});        
                }
                
                function getNextProducts() 
                {
                    var lastPayapalIdval = document.getElementById('lastPayapalId').value; 
                    var query = document.getElementById('storedquery').value;
                    // alert('query '+query+' lastPayapalIdval '+lastPayapalIdval);
                    SalesOrderSearchController.getNextProducts(lastPayapalIdval,query, 
                                                           function(result, event)
                                                           {
                                                               if (event.status) 
                                                               {
                                                                   if(result=='[]')
                                                                   {
                                                                       alert('No results found.');
                                                                   }
                                                                   else 
                                                                       renderProducts(result);
                                                               } 
                                                               else if (event.type == 'exception') 
                                                               {
                                                                   document.getElementById("errors-js").innerHTML = event.message;
                                                               } else 
                                                               {
                                                                   document.getElementById("errors-js").innerHTML = event.message;
                                                               }
                                                           }, {escape:true});        
                }
                </script>
                   </apex:outputPanel>
                </apex:outputPanel>
                <style type="text/css">
                    .headerSearchLeftRoundedCorner #phSearchInput{background-color: transparent !important; border:0 !important;outline:0}
                    .dataTables_filter {
                    display: none; 
                    }
                    
                    body {
                    }
                    table.dataTable th,
                    table.dataTable td {
                    white-space: nowrap;
                    }
                    .table{
                    border:1px solid #ddd;
                    }
                    .row {
                    margin-right: 0px;
                    margin-left: 0px;
                    }                    
                    .fieldset-salesorder {
                    border: 2px solid threedface;
                    -moz-border-radius: 8px;
                    -webkit-border-radius: 8px;
                    border-radius: 8px;
                    padding: 20px 38px;
                    }
                    legend.legendStyle {
                    padding-left: 5px;
                    padding-right: 5px;
                    }
                    fieldset.fsStyle {
                    font-family: Arial,Helvetica,sans-serif;
                    font-size: small;
                    font-weight: normal;
                    border: 2px solid threedface;
                    padding: 4px 25px 20px;
                    margin: 5px;
                    border-radius: 8px;  
                    }
                    legend.legendStyle {
                    font-family: Arial,Helvetica,sans-serif;
                    font-size: 18px;
                    color: #428BCA;
                    background-color: transparent;
                    font-weight: bold;
                    }
                    legend {
                    width: auto;
                    border-bottom: 0px;
                    }
                    .manstep3label{
                    margin-bottom: 17px;
                    width: 100%;     
                    }
                    .textInput{
                    margin-bottom:10px !important;
                    margin-left:0px !important;
                    }              
                    body .bPageBlock, body .secondaryPalette.bPageBlock{
                    background:none !important;
                    background-color:none !important; 
                    border-bottom: none !important;
                    border-left: none !important; 
                    border-right: none !important; 
                    -webkit-border-radius: none !important;
                    border-radius: none !important;
                    }
                    .bPageBlock {
                    border-top:0px !important;
                    }
                    .man3-table2-content{
                    text-align:center;
                    }
                    .apexp .bPageBlock.apexDefaultPageBlock .pbBody {
                    margin: 0 !important;
                    }
                    .col-md-6{
                    padding-right:0px !important;
                    padding-left: 0px !important;
                    }
                    .man3-section-heading{
                    color: #297FCA;
                    margin: 18px 0px;
                    border-bottom: 2px solid #d2d2d2;
                    padding-bottom: 4px;
                    }
                    .man3-section-heading h4{
                    border: 2px solid #D2D2D2;
                    border-radius: 6px 6px 0px 0px;
                    padding: 5px 17px 4px 17px;
                    background: #ddd;
                    border-bottom: 1px solid #d2d2d2;
                    text-shadow: 1px 1px 1px #FFF;
                    }
                    .no-css:before{
                    top: 0px;
                    left: 0px;
                    height: 0px;
                    width:0px;
                    display: none !important;
                    position: absolute;
                    color: white;
                    border: none !important;
                    border-radius: 0px !important;
                    text-align: center;
                    line-height: 0px !important;
                    box-shadow: 0 !important;
                    box-sizing: content-box;
                    content: '' !important;
                    background:none !important;
                    }
                    body .btn{
                    background: #69c5ec !important;
                    outline:0 !important;
                    }
                    .custPopup{
                    background-color: white;
                    z-index: 9999;
                    position: fixed;
                    margin-left: -500px;
                    border-radius: 8px;
                    width: 888px;
                    margin-left: --455px;
                    top: 6%;
                    left: 53%;
                    }
                    .popupBackground{
                    overflow: auto;
                    background-color:black;
                    opacity: 0.7;
                    filter: alpha(opacity = 20);
                    position:fixed;
                    width: 100%;
                    height:191%;
                    top: 0%;
                    left: 0%;
                    z-index: 1001;
                    }
                    .popupcontent_container{
                    width: 95%;
                    margin: 3% auto 1%;
                    }
                    .bPageBlock .message {
                    color: #a94442 !important;
                    background-color: #f2dede !important;
                    padding: 9px !important;
                    border: 1px solid #ebccd1 !important;
                    border-radius: 4px !important;
                    width: 54% !important;
                    margin-bottom: 20px !important;
                    }
                    .message .messageText h4 {
                    font-weight: bold !important;
                    margin-right: 10px !important;
                    display: inline !important;
                    }
                    .focus-section{width: 0px;height:0px;border:1px solid #fff;}
                    .focus-section:focus{border:1px solid #fff;outline:0 !important;}
                    
                    div.container {
                    max-width:1550px !important;
                    margin: 0 auto;
                    }
                    .content_container{
                    width:100% !important;
                    font-size:12px;
                    white-space: normal;
                    }
                    .overflowfld{
                    max-width:50px; !important;
                    white-space: nowrap !important;
                    overflow: hidden !important;
                    text-overflow: ellipsis !important;
                    }
                    .overflowfld2{
                    max-width:10px; !important;
                    white-space: nowrap !important;
                    overflow: hidden !important;
                    text-overflow: ellipsis !important;
                    }
                    table.dataTable.dtr-inline.collapsed > tbody > tr > td:first-child:before, table.dataTable.dtr-inline.collapsed > tbody > tr > th:first-child:before{
                    font-size:14px !important;
                    }
                    table.dataTable.dtr-inline.collapsed > tbody > tr > td:first-child{
                    cursor: auto !important;
                    }
                    body input[type=text]{height: 27px !important;
                    border-radius: 3px !important;
                    border: 1px solid #ccc !important;
                    padding: 0px 5px 0px 10px !important;
                    width:200px;}  
                    body select{height: 27px !important;
                    border-radius: 3px !important;
                    border: 1px solid #ccc !important;
                    padding: 0px 5px 0px 10px !important;
                    width:200px}
                    .table>thead>tr>th:focus{outline:0 !important;}
                </style>
            </head>
            <body>
                <apex:outputPanel id="tstselectionpopup">
                    <apex:outputPanel styleClass="manualorder-popupBackground" layout="block" rendered="{!displayselectionPopup}"/>
                    <apex:outputPanel styleClass="manualorder-custPopup" layout="block" rendered="{!displayselectionPopup}" style="width: 800px;height: auto;margin-left: -457px;">
                        <!-- popup inner container-->
                        <div class="manualorder-popupcontent_container" style="padding:10px;"> 
                            <div class="popup_section_header">
                                <h3><b class="popup_headings">Selected LineItems for Sales Order #{!OrderNumber}</b></h3>
                            </div>
                            <div>
                                <apex:outputPanel layout="block" style="overflow:auto;height:287px;" id="panelselectionid" styleClass="popup_outputpanel" >
                                    <table class="table table-striped table-bordered table-hover" role="grid" aria-describedby="example_info" cellspacing="0" width="100%">
                                        <thead>
                                            <tr role="row">
                                                <th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" style="margin-left:10px;text-align:left;width:15%">Item #</th>
                                                <th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" style="margin-left:10px;text-align:left;width:25%">Product</th>
                                                <th class="sorting_asc" aria-sort="ascending" tabindex="0" aria-controls="example" rowspan="1" colspan="1" style="margin-left:10px;text-align:center;width:10%">Image</th>
                                                <th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" style="margin-left:10px;text-align:center;width:15%">Manufacturer</th>
                                                <th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" style="margin-left:10px;text-align:center;width:5%">QTY</th>
                                                <th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" style="margin-left:10px;text-align:center;width:20%">Item Status</th>
                                                <th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" style="margin-left:10px;text-align:center;width:20%">Row Total</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <apex:repeat var="item" value="{!soRelatedList}"> 
                                                <tr>
                                                    <td style="margin-left:10px;text-align:left;width:15%">
                                                        <a href="/{!soRelatedList[item].SoItem.Id}" target="_blank"><apex:outputText value="{!soRelatedList[item].SoItem.Name}" styleClass="a_links_inner"/> </a>
                                                    </td>
                                                    <td style="margin-left:10px;text-align:left;width:25%">
                                                        <apex:outputText escape="false" value="{!soRelatedList[item].SoItem.Product_Name__c} <br/><b>SKU : </b>{!soRelatedList[item].SoItem.ProductSKU__c}"></apex:outputText>
                                                    </td> 
                                                    <td style="margin-left:10px;text-align:center;width:10%">
                                                        <apex:image value="{!soRelatedList[item].SoItem.Product_Url__c}" height="45px" width="70px"/>
                                                    </td>
                                                    <td style="margin-left:10px;text-align:center;width:15%">
                                                       <b> <apex:outputText value="{!soRelatedList[item].SoItem.Manufacturer__c}" rendered="{!!IsBlank(soRelatedList[item].SoItem.Manufacturer__c)}" />
                                                        <apex:outputText value="NA" rendered="{!IsBlank(soRelatedList[item].SoItem.Manufacturer__c)}"/> </b>
                                                    </td>
                                                    <td style="margin-left:10px;text-align:center;width:5%">
                                                        <apex:outputText value="{!soRelatedList[item].SoItem.Quantity__c}" />
                                                    </td>
                                                    <td style="margin-left:10px;text-align:center;width:20%">
                                                        <apex:outputText value="{!soRelatedList[item].SoItem.Item__c}" />
                                                    </td>
                                                    <td style="margin-left:10px;text-align:right;width:20%"> 
                                                        <apex:outputText value="{0, number, $#,###,###,###,##0.00}">
                                                            <apex:param value="{!soRelatedList[item].SoItem.Row_Total__c}" />
                                                        </apex:outputText>
                                                    </td>
                                                </tr> 
                                                
                                                    <apex:repeat value="{!soRelatedList[item].bundleList}" var="bundleItem" rendered="{!if(soRelatedList[item].bundleList != null,true,false)}">
                                                        <tr id="Bundel" role="row">
                                                            <td style="margin-left:10px;text-align:left;width:15%">
                                                                <a href="/{!bundleItem.Id}" target="_blank"><apex:outputText value="{!bundleItem.Name}" styleClass="a_links_inner"/> </a>
                                                            </td>
                                                            <td style="margin-left:10px;text-align:left;width:25%">
                                                                <i><apex:outputText value="<b>{!if(bundleItem.Bundle_Item__r.Include__c==true,'Set Includes','Optional Pieces')}</b><br/>" style="color:#4e505e;" escape="false"></apex:outputText> </i>
                                                                {!bundleItem.ProductSKU__c}
                                                            </td>
                                                            <td style="margin-left:10px;text-align:center;width:10%">
                                                                <apex:image value="{!bundleItem.Product_Url__c}" height="45px" width="70px"/>
                                                            </td>
                                                            <td colspan="4" style="margin-left:10px;text-align:center;width:50%">
                                                                {!bundleItem.Quantity__c} x {!bundleItem.Product_Name__c} <apex:outputText value="{0, number, $#,###,###,###,##0.00}">
                                                                <apex:param value="{!bundleItem.Price__c}" />
                                                                </apex:outputText>
                                                            </td> 
                                                           
                                                          </tr>   
                                                    </apex:repeat>
                                                 
                                            </apex:repeat>
                                        </tbody>
                                    </table>
                                </apex:outputPanel>
                            </div>
                            <div class="man-step2-save-btn" style="width: 100%;margin-bottom: 20px;float: left;padding: 0px 319px;">
                                <apex:commandButton id="popupId" value="Close" action="{!closeselectionPopup}" rerender="tstselectionpopup" styleClass="manstep3-savebtn manstep3-popupbtn" style="width: 100px !important;font-size: 16px !important;"/>
                            </div>
                            <br/>
                        </div>
                        <!--end of popup inner container-->
                    </apex:outputPanel>
                </apex:outputPanel>
                
                <apex:actionFunction status="message" name="renderProducts" action="{!showProducts}" reRender="TopPanel,errormessage" >
                    <apex:param value="" name="productlistfromparam" />
                </apex:actionFunction>
                
                <div id="errors-js"> </div>
                <apex:outputpanel >
                    <apex:actionstatus id="message">
                        <apex:facet name="start">
                            <div class="waitingSearchDiv" id="el_loading" style="background-color: #d7d7d7;height:100%;opacity:0.6;width:100%;position:fixed;cursor:wait"> 
                                <div class="waitingHolder" style="top:250px; width: 91px;">
                                    <img class="waitingImage" src="{!$Resource.loading}" title="Please Wait..." />
                                    <span class="waitingDescription" style="color:#000 !important;">Processing...</span>
                                </div>
                            </div>
                        </apex:facet>
                    </apex:actionstatus>
                </apex:outputpanel>
                
                <div id="main-wrapper">
                    <!-- Header effect -->
                    <div class="effect6" style="margin-bottom: 25px;">  
                        <div class="header_container">
                            <apex:image value="{!$Resource.coleman_header_logo}" />
                            <div style="float:right;width: 19%;padding: 20px 0px;">
                                <apex:commandButton status="message" id="salesOrder" value="Sales Orders List" action="{!goTosalesorderlist}" styleClass="Header-btns" style="background: #F3F3F3 !important;font-size:11px;float:right" />
                                <apex:commandButton status="message" id="home" value="Home Page" styleClass="Header-btns" oncomplete="goToHomePage()" style="background: #F3F3F3 !important;font-size:11px;margin-right:10px;float:right"/>
                            </div>
                        </div>
                    </div> 
                    <!--end of Header effect -->
                    
                    <div id="container" class="container content_container" style="margin-top:109px;">
                        <apex:pagemessages id="errormessage" />
                        <!-- Search block -->       
                        <div class="col-md-12" style="padding:0;margin-bottom:30px">
                            <fieldset class="fsStyle">
                                <legend class="legendStyle">Sales Order Search</legend>
                                <!--   <input type="text" id="mytext3" class="focus-section"  style=" width: 0px !important;height: 0px !important; border-color: #fff !important;border-width: 0px !important; margin: 0;"/> -->
                                <apex:pageBlock > 
                                    
                                    <div class="row collapse in">
                                        <div class="col-md-3">
                                            <fieldset class="inner" style="width:100%;margin-right:0px;padding: 0px 24.2px;border: 0px;">
                                                <div class="bill-add-rows"><label class="bill-add-label" style="font-size: 12px;"> Order Number :</label>
                                                    <input id="accName" type="text" onkeypress="uniKeyCode(event)" placeholder="Ex: SO-0XXXXX / 3XXXX1" />                                                
                                                </div>
                                            </fieldset>
                                        </div>
                                        <div class="col-md-3">
                                            <fieldset class="inner" style="width:100%;margin-right:0px;padding: 0px 24.2px;border: 0px;">
                                                <div class="bill-add-rows"><label class="bill-add-label" style="font-size: 12px;"> Customer Name :</label> 
                                                    <input id="customerName" type="text" onkeypress="uniKeyCode(event)" placeholder="Ex: Mac" />
                                                </div><br/>
                                            </fieldset>
                                        </div>
                                        <div class="col-md-3">
                                            <fieldset class="inner" style="width:100%;margin-right:0px;padding: 0px 24.2px;border: 0px;">
                                                <div class="bill-add-rows"><label class="bill-add-label" style="font-size: 12px;width: 100%;"> Email :</label> 
                                                    <input id="Email" type="text" onkeypress="uniKeyCode(event)" placeholder="Ex: abc@xyz.com"/>
                                                </div><br/>
                                            </fieldset>
                                        </div>
                                        
                                        <div class="col-md-3">
                                            
                                            <fieldset class="inner" style="width:100%;margin-right:0px;padding: 0px 24.2px;border: 0px;">
                                                <div class="bill-add-rows"><label class="bill-add-label" style="font-size: 12px;width: 100%;">Status : </label>
                                                    <apex:selectList onchange="assignStatus(this.value)" id="Details" value="{!status}" required="false" size="1" >
                                                        <apex:selectOption itemvalue="" itemLabel="--None--" />
                                                        <apex:selectOption itemvalue="Processing" itemLabel="Processing"/>
                                                        <apex:selectOption itemvalue="Multiple Statuses" itemLabel="Multiple Statuses"/>
                                                        <apex:selectOption itemvalue="Held under Fraud Check Dept" itemLabel="Held under Fraud Check Dept"/>
                                                        <apex:selectOption itemvalue="Fraud Detected" itemLabel="Fraud Detected"/>
                                                        <apex:selectOption itemvalue="Held for Custom Price Approval" itemLabel="Held for Custom Price Approval"/>
                                                    </apex:selectList>
                                                </div><br/>
                                            </fieldset>
                                            <apex:actionFunction id="fn" name="assignStatus" reRender="Details,Search">
                                                <apex:param value=""  name="assignStatusvalue" assignTo="{!status}"/>
                                            </apex:actionFunction>
                                        </div>
                                    </div>  
                                    <div class="productsearch-btn-div">
                                        <apex:commandButton id="Search" value="Search" onclick="searchPurchaseOrdersJS('{!status}')" reRender="javaScriptPanel" styleClass="productsearchbtn manstep3-continuebtn" />
                                    </div>
                                </apex:pageBlock>
                            </fieldset>
                        </div>
                        
                        <!-- end of Search block-->
                        
                        <!-- Search, sort, paging table -->
                        <apex:outputPanel id="TopPanel" >
                            <p style="display:none">lastPayapalId: <input id="lastPayapalId" value="{!lastPayapalId}" type="text" /> <br/>
                                firstPayapalId: <input id="firstPayapalId" value="{!firstPayapalId}" type="text" /> <br/>
                                storedquery: <input id="storedquery" value="{!storedquery}" type="text" /> <br/>   </p> 
                            <div class="productsearch-nxt-prev-div" style="padding: 6px 0px">
                                <div style="width:16%;float:right;">
                                    <apex:commandButton id="Previous" value="Previous" onclick="getPrevProducts()"  reRender="javaScriptPanel" styleClass="productsearchnxt manstep3-continuebtn" style="margin-right:20px;font-size:12px !important;width: 70px;font-weight: bold !important;" />
                                    <apex:commandButton id="Next" value="Next" onclick="getNextProducts()"  reRender="javaScriptPanel" styleClass="productsearchnxt manstep3-continuebtn" style="font-size:12px !important;width: 70px;font-weight: bold !important;"/>
                                </div>
                            </div>
                            <table class="table table-striped" role="grid" aria-describedby="example_info" cellspacing="0" width="100%">
                                <thead>
                                    <tr role="row">
                                        <th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="SO No.: activate to sort column ascending" style="width: 88px;">SO #</th>
                                        <th class="sorting_asc" aria-sort="ascending" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Magento: activate to sort column ascending" style="width: 96px;">Magento #</th>
                                        <th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Order Date: activate to sort column ascending" style="width: 111px;">Order Date</th>
                                        <th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Email: activate to sort column ascending" style="width: 150px;">Customer Name</th>
                                        <th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Email: activate to sort column ascending" style="width: 150px;">Email</th>
                                        <th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Bill To: activate to sort column ascending" style="width: 100px;">Bill To</th>
                                        <th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Ship To: activate to sort column ascending" style="width: 100px;">Ship To</th>
                                        <th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Order Status: activate to sort column ascending" style="width: 130px;">Order Status</th>
                                        <th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Payment Status: activate to sort column ascending" style="width: 20px;">Payment Status</th>
                                        <th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Sales Rep: activate to sort column ascending" style="width: 101px;">Sales Rep</th>
                                        <th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Grand Total: activate to sort column ascending" style="width: 98px;">Grand Total</th>
                                        <th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" style="width: 98px;"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <apex:repeat id="products" value="{!salesOrdersList}" var="orderHeader" >
                                        <tr role="row" id="index" class="odd">
                                            <td>
                                                <a href="/{!orderHeader.Id}" target="_blank"><apex:outputText value="{!orderHeader.Name}" styleClass="a_links"/> </a>
                                            </td>
                                            <td><apex:outputtext value="{!orderHeader.Magento_order_No__c}" title="{!orderHeader.Magento_order_No__c}"/></td>
                                            <td><apex:outputtext value="{0,date,MM/dd/yyyy}" title="{!orderHeader.Order_Date__c}">
                                                <apex:param value="{!orderHeader.Order_Date__c}"/>
                                                </apex:outputtext>
                                            </td> 
                                            <td><apex:outputtext value="{!orderHeader.Customer_Name__r.name}" title="{!orderHeader.Customer_Name__r.name}"/></td>
                                            <td class="overflowfld"><apex:outputtext value="{!orderHeader.Email__c}" title="{!orderHeader.Email__c}"/></td>
                                            <td class="overflowfld2"><apex:outputtext value="{!orderHeader.Bill_To__c}"  title="{!orderHeader.Bill_To__c}"/></td>
                                            <td class="overflowfld2"><apex:outputtext value="{!orderHeader.Ship_to__c}" title="{!orderHeader.Ship_to__c}"/></td>
                                            <td><apex:outputText value="{!orderHeader.Order_Status__c}" /></td>
                                            <td><apex:outputtext value="{!orderHeader.Payment_Status__c}" title="{!orderHeader.Payment_Status__c}"/></td>
                                            <td><p>$<apex:outputtext value="{!orderHeader.Grand_Total__c}" title="{!orderHeader.Grand_Total__c}" /></p></td> 
                                            <td style="text-align:center">
                                                <apex:commandButton status="message" action="{!showpopup}" value="Options" reRender="tstselectionpopup" styleClass="manstep3-continuebtn edit-SO-optn-btn">
                                                    <apex:param name="OptionsId" value="{!orderHeader.id}" assignTo="{!OptionsId}" id="OptionsId"  />
                                                    <apex:param name="displayselectionPopup" value="true" assignTo="{!displayselectionPopup}" id="displayselectionPopup"  />
                                                </apex:commandButton>                                               
                                            </td>
                                        </tr>
                                    </apex:repeat>
                                </tbody>
                            </table>
                        </apex:outputPanel>
                        <!-- end of Search, sort, paging table -->
                        <br/><br/>     
                    </div>
                </div> 
            </body>
        </html>  
    </apex:form> 
</apex:page>